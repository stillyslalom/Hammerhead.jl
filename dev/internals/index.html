<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internals · Hammerhead.jl</title><meta name="title" content="Internals · Hammerhead.jl"/><meta property="og:title" content="Internals · Hammerhead.jl"/><meta property="twitter:title" content="Internals · Hammerhead.jl"/><meta name="description" content="Documentation for Hammerhead.jl."/><meta property="og:description" content="Documentation for Hammerhead.jl."/><meta property="twitter:description" content="Documentation for Hammerhead.jl."/><meta property="og:url" content="https://stillyslalom.github.io/Hammerhead.jl/internals/"/><meta property="twitter:url" content="https://stillyslalom.github.io/Hammerhead.jl/internals/"/><link rel="canonical" href="https://stillyslalom.github.io/Hammerhead.jl/internals/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Hammerhead.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../function_ref/">Function Reference</a></li><li class="is-active"><a class="tocitem" href>Internals</a><ul class="internal"><li><a class="tocitem" href="#Internals"><span>Internals</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Internals</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Internals</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/stillyslalom/Hammerhead.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/stillyslalom/Hammerhead.jl/blob/main/docs/src/internals.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h2><ul><li><a href="../function_ref/#Hammerhead.PIVResult"><code>Hammerhead.PIVResult</code></a></li><li><a href="../function_ref/#Hammerhead.PIVStage"><code>Hammerhead.PIVStage</code></a></li><li><a href="#Hammerhead.PIVStageCache"><code>Hammerhead.PIVStageCache</code></a></li><li><a href="#Hammerhead.PIVStageCache-Union{Tuple{PIVStage}, Tuple{T}, Tuple{PIVStage, Type{T}}} where T"><code>Hammerhead.PIVStageCache</code></a></li><li><a href="../function_ref/#Hammerhead.PIVVector"><code>Hammerhead.PIVVector</code></a></li><li><a href="../function_ref/#Hammerhead.PIVStages-Tuple{Int64, Int64}"><code>Hammerhead.PIVStages</code></a></li><li><a href="#Hammerhead.analyze_correlation_plane"><code>Hammerhead.analyze_correlation_plane</code></a></li><li><a href="#Hammerhead.apply_cached_window!-Union{Tuple{T2}, Tuple{T1}, Tuple{Hammerhead.PIVStageCache{T1}, AbstractArray{T2}, AbstractArray{T2}}} where {T1, T2}"><code>Hammerhead.apply_cached_window!</code></a></li><li><a href="#Hammerhead.apply_window!-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractArray{T}}} where T"><code>Hammerhead.apply_window!</code></a></li><li><a href="#Hammerhead.barycentric_coordinates-NTuple{4, AbstractVector}"><code>Hammerhead.barycentric_coordinates</code></a></li><li><a href="#Hammerhead.build_window-Tuple{Any, Hammerhead.WindowFunction}"><code>Hammerhead.build_window</code></a></li><li><a href="#Hammerhead.calculate_correlation_moment-Tuple{AbstractMatrix, CartesianIndex}"><code>Hammerhead.calculate_correlation_moment</code></a></li><li><a href="#Hammerhead.calculate_quality_metrics-Union{Tuple{T}, Tuple{AbstractMatrix{T}, CartesianIndex, Real}} where T"><code>Hammerhead.calculate_quality_metrics</code></a></li><li><a href="#Hammerhead.fill_symmetric_padding!-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, Int64, Int64, Tuple{Int64, Int64}}} where T"><code>Hammerhead.fill_symmetric_padding!</code></a></li><li><a href="#Hammerhead.find_containing_triangle-Tuple{AbstractMatrix, Real, Real}"><code>Hammerhead.find_containing_triangle</code></a></li><li><a href="#Hammerhead.find_local_maxima-Tuple{AbstractMatrix}"><code>Hammerhead.find_local_maxima</code></a></li><li><a href="#Hammerhead.find_secondary_peak-Tuple{AbstractMatrix, CartesianIndex, Real}"><code>Hammerhead.find_secondary_peak</code></a></li><li><a href="#Hammerhead.find_secondary_peak_robust-Tuple{AbstractMatrix, CartesianIndex, Real}"><code>Hammerhead.find_secondary_peak_robust</code></a></li><li><a href="#Hammerhead.generate_interrogation_grid-Tuple{Tuple{Int64, Int64}, Tuple{Int64, Int64}, Tuple{Float64, Float64}}"><code>Hammerhead.generate_interrogation_grid</code></a></li><li><a href="#Hammerhead.generate_window_1d-Tuple{Hammerhead.SimpleWindow, Int64}"><code>Hammerhead.generate_window_1d</code></a></li><li><a href="#Hammerhead.get_timer-Tuple{PIVResult}"><code>Hammerhead.get_timer</code></a></li><li><a href="#Hammerhead.interpolate_vectors-Tuple{PIVResult}"><code>Hammerhead.interpolate_vectors</code></a></li><li><a href="#Hammerhead.is_area_preserving"><code>Hammerhead.is_area_preserving</code></a></li><li><a href="#Hammerhead.linear_barycentric_interpolation-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix}"><code>Hammerhead.linear_barycentric_interpolation</code></a></li><li><a href="#Hammerhead.linear_interpolation_2points-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix, Symbol}"><code>Hammerhead.linear_interpolation_2points</code></a></li><li><a href="#Hammerhead.nearest_neighbor_interpolation-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix}"><code>Hammerhead.nearest_neighbor_interpolation</code></a></li><li><a href="#Hammerhead.pad_to_size-Union{Tuple{T}, Tuple{AbstractMatrix{T}, Tuple{Int64, Int64}}} where T"><code>Hammerhead.pad_to_size</code></a></li><li><a href="../function_ref/#Hammerhead.plot_piv-Tuple{AbstractMatrix, PIVResult}"><code>Hammerhead.plot_piv</code></a></li><li><a href="#Hammerhead.process_chunk!-Union{Tuple{T}, Tuple{Hammerhead.PIVStageCache{T}, Any, Any, Any, Any, Any, PIVStage}, Tuple{Hammerhead.PIVStageCache{T}, Any, Any, Any, Any, Any, PIVStage, Any}} where T"><code>Hammerhead.process_chunk!</code></a></li><li><a href="../function_ref/#Hammerhead.run_piv-Union{Tuple{T}, Tuple{Matrix{T}, Matrix{T}}} where T&lt;:Union{Real, ColorTypes.Gray}"><code>Hammerhead.run_piv</code></a></li><li><a href="#Hammerhead.run_piv_stage-Union{Tuple{T}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage, Type{T}}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage, Type{T}, Any}} where T"><code>Hammerhead.run_piv_stage</code></a></li><li><a href="#Hammerhead.validate_affine_transform-Tuple{AbstractMatrix}"><code>Hammerhead.validate_affine_transform</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.analyze_correlation_plane" href="#Hammerhead.analyze_correlation_plane"><code>Hammerhead.analyze_correlation_plane</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">analyze_correlation_plane(correlation_plane) -&gt; (displacement, peak_ratio, correlation_moment)</code></pre><p>Analyze correlation plane to extract displacement and quality metrics at PIV stage level. This allows the same analysis to be applied to results from different correlation algorithms.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L790-L795">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.apply_cached_window!-Union{Tuple{T2}, Tuple{T1}, Tuple{Hammerhead.PIVStageCache{T1}, AbstractArray{T2}, AbstractArray{T2}}} where {T1, T2}" href="#Hammerhead.apply_cached_window!-Union{Tuple{T2}, Tuple{T1}, Tuple{Hammerhead.PIVStageCache{T1}, AbstractArray{T2}, AbstractArray{T2}}} where {T1, T2}"><code>Hammerhead.apply_cached_window!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">apply_cached_window!(cache, subimg1, subimg2) -&gt; (windowed1, windowed2)</code></pre><p>Apply pre-computed window function to both subimages using pre-allocated buffers. Returns references to the cached windowed image buffers for efficient memory usage.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L497-L502">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.apply_window!-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractArray{T}}} where T" href="#Hammerhead.apply_window!-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractArray{T}}} where T"><code>Hammerhead.apply_window!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">apply_window!(subimage, window) -&gt; windowed_subimage</code></pre><p>Apply windowing array to subimage to reduce spectral leakage in correlation analysis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L206-L210">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.barycentric_coordinates-NTuple{4, AbstractVector}" href="#Hammerhead.barycentric_coordinates-NTuple{4, AbstractVector}"><code>Hammerhead.barycentric_coordinates</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">barycentric_coordinates(p1, p2, p3, query)</code></pre><p>Compute barycentric coordinates of query point with respect to triangle p1-p2-p3.</p><p>Returns (λ1, λ2, λ3) such that query = λ1<em>p1 + λ2</em>p2 + λ3*p3 and λ1 + λ2 + λ3 = 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1443-L1449">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.build_window-Tuple{Any, Hammerhead.WindowFunction}" href="#Hammerhead.build_window-Tuple{Any, Hammerhead.WindowFunction}"><code>Hammerhead.build_window</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">build_window(size, window_function) -&gt; window</code></pre><p>Build a 2D window function for the given size using the specified window function type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L191-L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.calculate_correlation_moment-Tuple{AbstractMatrix, CartesianIndex}" href="#Hammerhead.calculate_correlation_moment-Tuple{AbstractMatrix, CartesianIndex}"><code>Hammerhead.calculate_correlation_moment</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_correlation_moment(correlation_magnitudes, peak_location) -&gt; moment</code></pre><p>Calculate normalized second moment of correlation peak as sharpness measure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L725-L729">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.calculate_quality_metrics-Union{Tuple{T}, Tuple{AbstractMatrix{T}, CartesianIndex, Real}} where T" href="#Hammerhead.calculate_quality_metrics-Union{Tuple{T}, Tuple{AbstractMatrix{T}, CartesianIndex, Real}} where T"><code>Hammerhead.calculate_quality_metrics</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_quality_metrics(correlation_plane, peak_location, peak_value; robust=false) -&gt; (peak_ratio, correlation_moment)</code></pre><p>Calculate quality metrics for PIV correlation analysis.</p><p><strong>Arguments</strong></p><ul><li><code>correlation_plane</code> - Complex correlation result matrix</li><li><code>peak_location</code> - CartesianIndex of primary peak location</li><li><code>peak_value</code> - Magnitude of primary peak</li><li><code>robust=false</code> - Use robust local maxima method for secondary peak detection</li></ul><p><strong>Returns</strong></p><ul><li><code>peak_ratio::Float64</code> - Ratio of primary peak to secondary peak (higher is better)</li><li><code>correlation_moment::Float64</code> - Normalized correlation moment (measure of peak sharpness)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L538-L552">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.fill_symmetric_padding!-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, Int64, Int64, Tuple{Int64, Int64}}} where T" href="#Hammerhead.fill_symmetric_padding!-Union{Tuple{T}, Tuple{AbstractMatrix{T}, AbstractMatrix{T}, Int64, Int64, Tuple{Int64, Int64}}} where T"><code>Hammerhead.fill_symmetric_padding!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">fill_symmetric_padding!(padded, original, pad_top, pad_left, original_size)</code></pre><p>Fill padding regions using symmetric reflection to avoid discontinuities.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L983-L987">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.find_containing_triangle-Tuple{AbstractMatrix, Real, Real}" href="#Hammerhead.find_containing_triangle-Tuple{AbstractMatrix, Real, Real}"><code>Hammerhead.find_containing_triangle</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_containing_triangle(points, query_x, query_y)</code></pre><p>Find triangle containing the query point and return barycentric coordinates.</p><p>Returns (triangle<em>indices, barycentric</em>coords) or (nothing, nothing) if outside convex hull.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1410-L1416">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.find_local_maxima-Tuple{AbstractMatrix}" href="#Hammerhead.find_local_maxima-Tuple{AbstractMatrix}"><code>Hammerhead.find_local_maxima</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_local_maxima(correlation_magnitudes) -&gt; Vector{CartesianIndex}</code></pre><p>Find all local maxima in correlation plane using robust peak detection. Identifies peaks by finding points that are local maxima in their immediate neighborhood, handling both sharp and broad peaks correctly.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L657-L663">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.find_secondary_peak-Tuple{AbstractMatrix, CartesianIndex, Real}" href="#Hammerhead.find_secondary_peak-Tuple{AbstractMatrix, CartesianIndex, Real}"><code>Hammerhead.find_secondary_peak</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_secondary_peak(correlation_magnitudes, primary_location, primary_value) -&gt; secondary_value</code></pre><p>Find the secondary peak in correlation plane, excluding region around primary peak. Uses super-fast approach: find global maximum, then exclude if it&#39;s near primary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L574-L579">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.find_secondary_peak_robust-Tuple{AbstractMatrix, CartesianIndex, Real}" href="#Hammerhead.find_secondary_peak_robust-Tuple{AbstractMatrix, CartesianIndex, Real}"><code>Hammerhead.find_secondary_peak_robust</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_secondary_peak_robust(correlation_magnitudes, primary_location, primary_value) -&gt; secondary_value</code></pre><p>Find the secondary peak using local maxima detection for robustness in high shear flows. More computationally expensive but handles closely spaced peaks better.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L628-L633">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.generate_interrogation_grid-Tuple{Tuple{Int64, Int64}, Tuple{Int64, Int64}, Tuple{Float64, Float64}}" href="#Hammerhead.generate_interrogation_grid-Tuple{Tuple{Int64, Int64}, Tuple{Int64, Int64}, Tuple{Float64, Float64}}"><code>Hammerhead.generate_interrogation_grid</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_interrogation_grid(image_size, window_size, overlap) -&gt; (grid_x, grid_y)</code></pre><p>Generate grid of interrogation window center positions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1144-L1148">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.generate_window_1d-Tuple{Hammerhead.SimpleWindow, Int64}" href="#Hammerhead.generate_window_1d-Tuple{Hammerhead.SimpleWindow, Int64}"><code>Hammerhead.generate_window_1d</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">generate_window_1d(window_function, length) -&gt; window_vector</code></pre><p>Generate 1D window function using DSP.jl implementations for accuracy and performance. Supports both simple and parametric window functions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L226-L231">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.get_timer-Tuple{PIVResult}" href="#Hammerhead.get_timer-Tuple{PIVResult}"><code>Hammerhead.get_timer</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_timer(result::PIVResult) -&gt; TimerOutput</code></pre><p>Get the timer data from a PIV result for analysis or integration with other timing systems. Returns a new TimerOutput if no timing data is available.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L117-L122">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.interpolate_vectors-Tuple{PIVResult}" href="#Hammerhead.interpolate_vectors-Tuple{PIVResult}"><code>Hammerhead.interpolate_vectors</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">interpolate_vectors(result::PIVResult; method=:linear_barycentric, 
                   target_status=:interpolated, source_status=:good)</code></pre><p>Interpolate vectors in PIV result to replace missing or bad vectors.</p><p><strong>Arguments</strong></p><ul><li><code>result::PIVResult</code>: PIV result to interpolate</li><li><code>method::Symbol</code>: Interpolation method (<code>:linear_barycentric</code>, <code>:nearest</code>)</li><li><code>target_status::Symbol</code>: Status to assign to interpolated vectors</li><li><code>source_status::Symbol</code>: Only use vectors with this status for interpolation</li></ul><p><strong>Returns</strong></p><ul><li>Modified PIVResult with interpolated vectors</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1474-L1488">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.is_area_preserving" href="#Hammerhead.is_area_preserving"><code>Hammerhead.is_area_preserving</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_area_preserving(matrix, tolerance=0.1) -&gt; Bool</code></pre><p>Check if a 2×2 matrix preserves area within tolerance. Area preservation means |det(A)| ≈ 1.</p><p><strong>Arguments</strong></p><ul><li><code>matrix::AbstractMatrix</code> - 2×2 transformation matrix</li><li><code>tolerance::Float64</code> - Relative tolerance for determinant check</li></ul><p><strong>Returns</strong></p><ul><li><code>Bool</code> - True if area-preserving within tolerance</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">is_area_preserving([1.0 0.1; -0.1 1.0])  # true (rotation + small shear)
is_area_preserving([2.0 0.0; 0.0 0.5])   # false (scales area by factor of 1.0 but violates uniformity)
is_area_preserving([1.05 0.0; 0.0 0.95]) # true (small uniform scaling, det ≈ 1.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1593-L1612">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.linear_barycentric_interpolation-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix}" href="#Hammerhead.linear_barycentric_interpolation-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix}"><code>Hammerhead.linear_barycentric_interpolation</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">linear_barycentric_interpolation(points, values, query_points; fallback_method=:nearest)</code></pre><p>Perform linear barycentric interpolation for scattered 2D data.</p><p>For each query point, finds the triangle containing it and computes the interpolated value using barycentric coordinates. If a point is outside the convex hull, uses fallback method.</p><p><strong>Arguments</strong></p><ul><li><code>points::AbstractMatrix</code>: Nx2 matrix of point coordinates [x y]</li><li><code>values::AbstractVector</code>: N-element vector of values at each point</li><li><code>query_points::AbstractMatrix</code>: Mx2 matrix of query point coordinates</li><li><code>fallback_method::Symbol</code>: Method for points outside convex hull (<code>:nearest</code>, <code>:zero</code>, <code>:nan</code>)</li></ul><p><strong>Returns</strong></p><ul><li><code>Vector</code>: Interpolated values at query points</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1276-L1292">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.linear_interpolation_2points-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix, Symbol}" href="#Hammerhead.linear_interpolation_2points-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix, Symbol}"><code>Hammerhead.linear_interpolation_2points</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">linear_interpolation_2points(points, values, query_points, fallback_method)</code></pre><p>Linear interpolation between two points.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1364-L1368">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.nearest_neighbor_interpolation-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix}" href="#Hammerhead.nearest_neighbor_interpolation-Tuple{AbstractMatrix, AbstractVector, AbstractMatrix}"><code>Hammerhead.nearest_neighbor_interpolation</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nearest_neighbor_interpolation(points, values, query_points)</code></pre><p>Simple nearest neighbor interpolation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1561-L1565">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.pad_to_size-Union{Tuple{T}, Tuple{AbstractMatrix{T}, Tuple{Int64, Int64}}} where T" href="#Hammerhead.pad_to_size-Union{Tuple{T}, Tuple{AbstractMatrix{T}, Tuple{Int64, Int64}}} where T"><code>Hammerhead.pad_to_size</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">pad_to_size(subimg, target_size) -&gt; padded_array</code></pre><p>Pad a subimage to match target window size using symmetric padding. Uses the &#39;symmetric&#39; boundary condition which reflects values across the boundary.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L941-L946">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.process_chunk!-Union{Tuple{T}, Tuple{Hammerhead.PIVStageCache{T}, Any, Any, Any, Any, Any, PIVStage}, Tuple{Hammerhead.PIVStageCache{T}, Any, Any, Any, Any, Any, PIVStage, Any}} where T" href="#Hammerhead.process_chunk!-Union{Tuple{T}, Tuple{Hammerhead.PIVStageCache{T}, Any, Any, Any, Any, Any, PIVStage}, Tuple{Hammerhead.PIVStageCache{T}, Any, Any, Any, Any, Any, PIVStage, Any}} where T"><code>Hammerhead.process_chunk!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">process_chunk!(cache, chunk, grid_x, grid_y, img1, img2, stage, timer=nothing)</code></pre><p>Process a chunk of interrogation windows using the provided cache. Optionally uses timer for detailed performance tracking (thread 1 only).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1034-L1039">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.run_piv_stage-Union{Tuple{T}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage, Type{T}}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage, Type{T}, Any}} where T" href="#Hammerhead.run_piv_stage-Union{Tuple{T}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage, Type{T}}, Tuple{AbstractMatrix{&lt;:Real}, AbstractMatrix{&lt;:Real}, PIVStage, Type{T}, Any}} where T"><code>Hammerhead.run_piv_stage</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">run_piv_stage(img1, img2, stage, ::Type{T}=Float32) -&gt; PIVResult</code></pre><p>Perform PIV analysis for a single stage with parallel processing using ChunkSplitters.jl. Pre-allocates per-thread caches and merges results efficiently.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1096-L1101">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.validate_affine_transform-Tuple{AbstractMatrix}" href="#Hammerhead.validate_affine_transform-Tuple{AbstractMatrix}"><code>Hammerhead.validate_affine_transform</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">validate_affine_transform(transform_matrix; tolerance=0.1) -&gt; Bool</code></pre><p>Validate an affine transformation matrix for use in iterative deformation. Checks area preservation and other physical constraints.</p><p><strong>Arguments</strong></p><ul><li><code>transform_matrix::AbstractMatrix</code> - 2×2 or 3×3 affine transformation matrix</li><li><code>tolerance::Float64</code> - Tolerance for area preservation check (default: 0.1)</li></ul><p><strong>Returns</strong></p><ul><li><code>Bool</code> - True if transform is valid, false otherwise</li></ul><p><strong>Validation Criteria</strong></p><ul><li>Area preservation: |det(A)| ≈ 1 within tolerance</li><li>No excessive shear or rotation (condition number check)</li><li>Finite and real values only</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Valid identity transform
A = [1.0 0.0; 0.0 1.0]
validate_affine_transform(A)  # true

# Invalid transform (not area-preserving)
A = [2.0 0.0; 0.0 0.5]  # det = 1.0, but stretches by 2x and compresses by 0.5x
validate_affine_transform(A)  # false

# Valid small deformation
A = [1.05 0.02; -0.01 0.98]  # Small rotation and stretch
validate_affine_transform(A)  # likely true depending on tolerance</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L1183-L1215">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.PIVStageCache" href="#Hammerhead.PIVStageCache"><code>Hammerhead.PIVStageCache</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PIVStageCache{T, C}</code></pre><p>Per-thread computational cache for PIV stage processing. Contains pre-computed resources to avoid repeated allocations and enable thread-safe parallel processing.</p><p><strong>Fields</strong></p><ul><li><code>window::Matrix{T}</code> - Pre-computed window function matrix</li><li><code>correlator::C</code> - Thread-local correlator with FFT plans</li><li><code>vectors::Vector{PIVVector}</code> - Pre-allocated storage for results</li><li><code>windowed_img1::Matrix{T}</code> - Pre-allocated buffer for windowed subimage 1</li><li><code>windowed_img2::Matrix{T}</code> - Pre-allocated buffer for windowed subimage 2</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L453-L465">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Hammerhead.PIVStageCache-Union{Tuple{PIVStage}, Tuple{T}, Tuple{PIVStage, Type{T}}} where T" href="#Hammerhead.PIVStageCache-Union{Tuple{PIVStage}, Tuple{T}, Tuple{PIVStage, Type{T}}} where T"><code>Hammerhead.PIVStageCache</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">PIVStageCache(stage::PIVStage, ::Type{T}=Float32) -&gt; PIVStageCache{T, CrossCorrelator{T}}</code></pre><p>Create a per-thread computational cache from a PIV stage configuration. Pre-computes the window function matrix and initializes thread-local correlator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/stillyslalom/Hammerhead.jl/blob/8c9d84d5de528ce9615fc07089e99394647a8ed4/src/Hammerhead.jl#L474-L479">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../function_ref/">« Function Reference</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 23 July 2025 14:32">Wednesday 23 July 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
